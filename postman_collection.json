{
    "info": {
        "name": "Korva API",
        "description": "Korva API Collection — divided into Admin, Academy, and Player sections.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000/api",
            "type": "string"
        },
        {
            "key": "admin_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "academy_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "player_token",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "Admin",
            "description": "All admin guard endpoints — auth, roles, and permissions.",
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Login",
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "type": "text/javascript",
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.data && jsonData.data.access_token) {",
                                            "    pm.collectionVariables.set('admin_token', jsonData.data.access_token);",
                                            "}"
                                        ]
                                    }
                                }
                            ],
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"admin@example.com\",\n    \"password\": \"password\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/login",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "login"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Me",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/me",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "me"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Refresh Token",
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "type": "text/javascript",
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.data && jsonData.data.access_token) {",
                                            "    pm.collectionVariables.set('admin_token', jsonData.data.access_token);",
                                            "}"
                                        ]
                                    }
                                }
                            ],
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/refresh",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "refresh"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Logout",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/logout",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "logout"
                                    ]
                                }
                            }
                        }
                    ]
                },
                {
                    "name": "Roles",
                    "item": [
                        {
                            "name": "Get All Roles",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/roles",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "roles"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Create Role",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"name\": \"super-admin\",\n    \"permissions\": [\"create-user\", \"edit-user\"]\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/roles",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "roles"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Get Role With Permissions",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/roles/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "roles",
                                        "1"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Assign Permissions to Role",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"permissions\": [\"create-user\", \"edit-user\", \"delete-user\"]\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/roles/1/assign-permissions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "roles",
                                        "1",
                                        "assign-permissions"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Remove Permissions from Role",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"permissions\": [\"delete-user\"]\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/roles/1/remove-permissions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "roles",
                                        "1",
                                        "remove-permissions"
                                    ]
                                }
                            }
                        }
                    ]
                },
                {
                    "name": "Permissions",
                    "item": [
                        {
                            "name": "Get All Permissions",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/permissions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "permissions"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Create Permission",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"name\": \"create-user\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/permissions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "permissions"
                                    ]
                                }
                            }
                        }
                    ]
                },
                {
                    "name": "Admin Management",
                    "item": [
                        {
                            "name": "Create Admin",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"password\": \"secret123\",\n    \"password_confirmation\": \"secret123\",\n    \"role\": \"manager\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/admins",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "admins"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Assign Role to Admin",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"role\": \"super-admin\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/admins/1/assign-role",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "admins",
                                        "1",
                                        "assign-role"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Remove Role from Admin",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"role\": \"super-admin\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/admins/1/remove-role",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "admins",
                                        "1",
                                        "remove-role"
                                    ]
                                }
                            }
                        }
                    ]
                },
                {
                    "name": "Academy Management",
                    "item": [
                        {
                            "name": "Show Academy",
                            "request": {
                                "method": "GET",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "url": {
                                    "raw": "{{base_url}}/admin/academies/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "academies",
                                        "1"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Update Academy",
                            "request": {
                                "method": "PUT",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"name\": \"Updated Academy Name\",\n    \"email\": \"academy@example.com\",\n    \"phone\": \"0123456789\",\n    \"country\": \"Egypt\",\n    \"city\": \"Cairo\",\n    \"address\": \"123 Street\",\n    \"is_active\": true\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/academies/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "academies",
                                        "1"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Change Academy Status",
                            "request": {
                                "method": "PATCH",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{admin_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"status\": \"approved\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/admin/academies/1/status",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "admin",
                                        "academies",
                                        "1",
                                        "status"
                                    ]
                                }
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Academy",
            "description": "All academy guard endpoints — auth and onboarding.",
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Register (Send OTP)",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"contact_number\": \"+201234567890\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/academy/register",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "academy",
                                        "register"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "Check OTP",
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "type": "text/javascript",
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.data && jsonData.data.token) {",
                                            "    pm.collectionVariables.set('academy_token', jsonData.data.token);",
                                            "}"
                                        ]
                                    }
                                }
                            ],
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"contact_number\": \"+201234567890\",\n    \"otp\": \"1234\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/academy/check-otp",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "academy",
                                        "check-otp"
                                    ]
                                }
                            }
                        },
                        {
                            "name": "OnBoarding",
                            "request": {
                                "method": "POST",
                                "header": [
                                    {
                                        "key": "Accept",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Content-Type",
                                        "value": "application/json"
                                    },
                                    {
                                        "key": "Authorization",
                                        "value": "Bearer {{academy_token}}"
                                    }
                                ],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"name\": \"Academy Name\",\n    \"email\": \"academy@example.com\",\n    \"phone\": \"+201234567890\",\n    \"age_group\": \"U12\",\n    \"country\": \"Egypt\",\n    \"city\": \"Cairo\",\n    \"address\": \"123 Main Street\",\n    \"business_owner_email\": \"owner@example.com\",\n    \"business_owner_phone\": \"+201234567891\"\n}"
                                },
                                "url": {
                                    "raw": "{{base_url}}/academy/onboarding",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "academy",
                                        "onboarding"
                                    ]
                                }
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "Player",
            "description": "All player guard endpoints (to be added).",
            "item": []
        }
    ]
}